name: pull-request-validation

on:
  pull_request:
    branches:
      - "*"

jobs:
  test-xcode26-beta:
    name: Build and Test with Xcode 26 Beta
    runs-on: macos-latest
    env:
      MOCKABLE_LINT: true
      MOCKABLE_TEST: true
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Select Xcode 26 Beta
        run: |
          # Attempt to select Xcode 26 beta
          sudo xcode-select -s /Applications/Xcode_26.0.app || sudo xcode-select -s /Applications/Xcode-beta.app || true
          xcodebuild -version
          swift --version

      - name: Run Tests
        run: |
          Scripts/lint.sh & Scripts/test.sh
